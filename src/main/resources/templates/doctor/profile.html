<!DOCTYPE html>
<html lang="en" th:replace="~{base :: parent(~{::#content},~{::title},~{},~{})}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Profile - MedTrackFit</title>
    <link rel="stylesheet" data-th-href="@{'/css/output.css'}">
    <style>
        .profile-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .profile-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .edit-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <div id="content">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-8">
            <div class="container mx-auto px-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold mb-2">Doctor Profile</h1>
                        <p class="text-blue-100">Manage your professional profile and credentials</p>
                    </div>
                    <div class="flex space-x-4">
                        <button onclick="window.location.href='/doctor/edit-profile'" class="edit-button bg-purple-500 px-4 py-2 rounded-lg text-white hover:from-blue-700 hover:to-purple-900 transition duration-300">
                            Edit Profile
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <!-- Success Message -->
            <div th:if="${param.success}" class="mb-6 p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-300 rounded-lg">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Profile updated successfully!
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Profile Information -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Basic Information -->
                    <div class="profile-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">Basic Information</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.name}">Dr. John Smith</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.email}">john.smith@medtrackfit.com</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Phone Number</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.phoneNumber ?: '+1 (555) 123-4567'}">+1 (555) 123-4567</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">License Number</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.licenseNumber ?: 'MD-12345'}">MD-12345</p>
                            </div>
                        </div>
                    </div>

                    <!-- Professional Information -->
                    <div class="profile-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">Professional Information</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Specialization</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.specialization ?: 'Cardiology'}">Cardiology</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Years of Experience</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.yearsOfExperience ?: '15'}">15 years</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Qualification</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100" th:text="${doctor.qualification ?: 'MD, PhD'}">MD, PhD</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Medical School</label>
                                <p class="text-lg text-gray-900 dark:text-gray-100">Harvard Medical School</p>
                            </div>
                        </div>
                    </div>

                    <!-- About Section -->
                    <div class="profile-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">About</h2>
                        </div>
                        <div>
                            <p class="text-gray-700 dark:text-gray-300" th:text="${doctor.about ?: 'Dr. John Smith is a board-certified cardiologist with over 15 years of experience in treating cardiovascular diseases. He specializes in interventional cardiology and has performed over 1000 successful procedures. Dr. Smith is committed to providing the highest quality of care to his patients and staying up-to-date with the latest medical advancements.'}">
                                Dr. John Smith is a board-certified cardiologist with over 15 years of experience in treating cardiovascular diseases. He specializes in interventional cardiology and has performed over 1000 successful procedures. Dr. Smith is committed to providing the highest quality of care to his patients and staying up-to-date with the latest medical advancements.
                            </p>
                        </div>
                    </div>

                    <!-- Performance Metrics -->
                    <div class="profile-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">Performance Metrics</h2>
                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300">View Details</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600 mb-2" th:text="${doctor.doctorPerformance?.patientsHelped ?: '245'}">245</div>
                                <div class="text-gray-600 dark:text-gray-400">Patients Helped</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600 mb-2" th:text="${doctor.doctorPerformance?.consultationsGiven ?: '1,234'}">1,234</div>
                                <div class="text-gray-600 dark:text-gray-400">Consultations</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-yellow-600 mb-2" th:text="${doctor.doctorPerformance?.satisfactionRating ?: '4.8'}">4.8</div>
                                <div class="text-gray-600 dark:text-gray-400">Rating</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600 mb-2" th:text="${doctor.doctorPerformance?.yearsActive ?: '15'}">15</div>
                                <div class="text-gray-600 dark:text-gray-400">Years Active</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Profile Picture -->
                    <div class="profile-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                        <div class="text-center">
                            <div class="mx-auto h-32 w-32 rounded-full bg-blue-500 flex items-center justify-center text-white text-4xl font-bold mb-4">
                                <img th:src="${doctor.profilePicture}" th:alt="${doctor.name}" class="h-32 w-32 rounded-full object-cover" style="display: none;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <span th:text="${#strings.substring(doctor.name, 0, 2)}">JS</span>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100" th:text="${doctor.name}">Dr. John Smith</h3>
                            <p class="text-gray-600 dark:text-gray-400" th:text="${doctor.specialization ?: 'Cardiologist'}">Cardiologist</p>

                            <!-- Profile Picture Upload Form -->
                            <form th:action="@{/doctor/update-profile-picture}" method="post" enctype="multipart/form-data" class="mt-4">
                                <input type="file" name="profilePicture" accept="image/*" class="hidden" id="profilePictureInput">
                                <button type="button" onclick="document.getElementById('profilePictureInput').click()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300">
                                    Change Photo
                                </button>
                                <button type="submit" class="ml-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-300" style="display: none;" id="uploadButton">
                                    Upload
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('profilePictureInput').addEventListener('change', function() {
            const uploadButton = document.getElementById('uploadButton');
            if (this.files && this.files[0]) {
                uploadButton.style.display = 'inline-block';
            } else {
                uploadButton.style.display = 'none';
            }
        });
    </script>
</body>
</html>
